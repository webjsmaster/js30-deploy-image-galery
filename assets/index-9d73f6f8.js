var v=Object.defineProperty;var C=(i,e,t)=>e in i?v(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var h=(i,e,t)=>(C(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();class a{constructor(e){this.element=null,this.createElement(e)}createElement(e){this.element=document.createElement(e.tag),this.setClasses(e.classNames),this.setTextContent(e.textContent),this.setCallback(e.callback),this.setAttribute(e.attribute)}getElement(){return this.element}setClasses(e){e.forEach(t=>this.element.classList.add(t))}setTextContent(e){this.element.textContent=e}setCallback(e){e&&e.length>0&&e.forEach(t=>this.element.addEventListener(t.event,s=>t.callback(s)))}setAttribute(e){e&&e.forEach(t=>this.element.setAttribute(t.id,t.value))}}class o{constructor(e){this.elementCreator=this.createView(e)}getHtmlElement(){return this.elementCreator.getElement()}createView(e){const t={tag:e.tag,classNames:e.classNames,textContent:e.textContent,callback:e.callback,attribute:e.attribute};return new a(t)}}const _=""+new URL("rs_school-f5e70645.svg",import.meta.url).href;class y extends o{constructor(){const e={tag:"div",classNames:["footer__school"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__link"],attribute:[{id:"href",value:"https://rs.school/"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:`${_}`},{id:"fill",value:"red"}]},s=new a(e).getElement();s.append(new a(t).getElement()),this.elementCreator.getElement().append(s)}}const V=""+new URL("github-2d49405e.svg",import.meta.url).href;class L extends o{constructor(){const e={tag:"div",classNames:["footer__profile"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__profile-link"],attribute:[{id:"href",value:"https://github.com/webjsmaster"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:V},{id:"fill",value:"red"}]},s=new a(e).getElement();s.append(new a(t).getElement()),this.elementCreator.getElement().append(s)}}class x extends o{constructor(){super({tag:"div",classNames:["footer__year"],textContent:"2023"})}}class N extends o{constructor(){const e={tag:"div",classNames:["footer__container"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new y().getHtmlElement(),new x().getHtmlElement(),new L().getHtmlElement())}}class H extends o{constructor(){const e={tag:"footer",classNames:["footer"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new N().getHtmlElement())}}class l extends o{constructor(){const e={tag:"button",classNames:["header__button"],callback:[{event:"click",callback:()=>this.handlerButton()}]};if(super(e),this.observers=[],l.exists)return l.instance;l.instance=this,l.exists=!0}handlerButton(){this.notifyObserver({type:"button"})}subscribe(e){this.observers.push(e)}notifyObserver(e){this.observers.forEach(t=>t.update(e))}}class c extends o{constructor(){const e={tag:"input",classNames:["input"],attribute:[{id:"id",value:"input"},{id:"maxlength",value:"20"},{id:"placeholder",value:"Enter to search"},{id:"autocomplete",value:"off"}],callback:[{event:"input",callback:t=>this.handlerInput(t.target.value)},{event:"keydown",callback:t=>t.key==="Enter"&&this.pressEnter()}]};if(super(e),this.observers=[],c.exists)return c.instance;c.instance=this,c.exists=!0,this.configureView()}configureView(){document.addEventListener("DOMContentLoaded",()=>{this.input=document.querySelector("#input"),this.input.focus()})}setValue(e){this.elementCreator.getElement().value=e,this.input.focus()}handlerInput(e){this.notifyObserver({type:"input",content:e})}pressEnter(){this.notifyObserver({type:"enter",content:this.getValue()})}getValue(){return this.elementCreator.getElement().value}subscribe(e){this.observers.push(e)}notifyObserver(e){this.observers.forEach(t=>t.update(e))}}class p{constructor(){h(this,"_baseUrl","https://api.unsplash.com/photos/");h(this,"_searchUrl","https://api.unsplash.com/search/photos");h(this,"_accessKey","zToxI9Bnf6yAmtUjD8Y9G30_1ngYFiggfBxSOXFekkk")}async getAllPhotos(e){return await fetch(`${this._baseUrl}?client_id=${this._accessKey}`+(e?`&per_page=${e}`:"")+"&page=2").then(t=>t.json()).then(t=>t)}async getFindPhotos(e,t){return await fetch(`${this._searchUrl}?query=${t}`+(e?`&per_page=${e}`:"")+`&client_id=${this._accessKey}`).then(s=>s.json()).then(s=>s)}}class k extends o{constructor(){const e={tag:"div",classNames:["loader"]};super(e),this.configureView()}configureView(){const e=this.elementCreator.getElement();e.textContent="PRELOADER ======>>> !!!!"}}class u extends o{constructor(){super({tag:"main",classNames:["main"]});h(this,"_isLoading",!1);if(u.exists)return u.instance;u.instance=this,u.exists=!0,this.api=new p,this.configureView()}configureView(){const t=this.elementCreator.getElement();this.container=new a({tag:"div",classNames:["main__container"]}).getElement(),t.append(this.container),this.setIsLoading(!0),this.renderView(this.container,[]),this.api.getAllPhotos(15).then(s=>{this.setIsLoading(!1),this.renderView(this.container,s)})}renderView(t,s){t.replaceChildren(),this.getIsLoading()?t.append(new k().getHtmlElement()):s.length?s.forEach(n=>{const r={tag:"img",classNames:["img"],attribute:[{id:"src",value:n.urls.small},{id:"onload",value:"imgLoaded(this)"}]},m=new a({tag:"div",classNames:["main__image"]}).getElement(),d=new a({tag:"div",classNames:["spinner"]}).getElement(),w=new a({tag:"div",classNames:[]}).getElement(),E=new a({tag:"div",classNames:[]}).getElement();d.append(w,E),document.addEventListener("DOMContentLoaded",()=>{this.input=document.querySelector(".main__image"),this.input.addEventListener("click",b=>{console.log("[53] ðŸš€: ",b.target)})}),m.append(d,new a(r).getElement()),t.append(m)}):t.textContent="Sorry, nothing was found for this request"}getHtmlContainer(){return this.container}getIsLoading(){return this._isLoading}setIsLoading(t){this._isLoading=t}}class g extends o{constructor(){super({tag:"div",classNames:["input__wrapper"]});h(this,"_value","");this.input=new c,this.button=new l().getHtmlElement(),this.configureView(),this.main=new u,this.api=new p}configureView(){this.elementCreator.getElement().append(this.input.getHtmlElement(),this.button)}update({type:t,content:s}){t==="input"?this.input.setValue(s):t==="button"?(this.input.setValue(""),this.handlerEnter("")):t==="enter"&&this.handlerEnter(s)}handlerEnter(t){const s=this.main.getHtmlContainer();this.input.getHtmlElement().disabled=!0,this.input.getHtmlElement().classList.add("active"),this.main.setIsLoading(!0),this.main.renderView(s,[]),t?this.api.getFindPhotos(15,t).then(n=>{this.endedLoading(s,n.results)}):this.api.getAllPhotos(15).then(n=>{this.endedLoading(s,n)})}endedLoading(t,s){this.main.setIsLoading(!1),this.main.renderView(t,s),this.input.getHtmlElement().disabled=!1,this.input.getHtmlElement().classList.remove("active"),this.input.getHtmlElement().focus()}}class O extends o{constructor(){const e={tag:"header",classNames:["header"]};super(e),this.configureView()}configureView(){const e=this.elementCreator.getElement(),t=new a({tag:"div",classNames:["header__container"]}).getElement();e.append(t),t.append(new g().getHtmlElement())}}class P extends o{constructor(){const e={tag:"div",classNames:["wrapper"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new O().getHtmlElement(),new u().getHtmlElement(),new H().getHtmlElement())}}class I{constructor(){this.body=document.querySelector("#app"),this.createHtmlElement()}createHtmlElement(){const e=new P;this.body.append(e.getHtmlElement())}}const A=new c,f=new g,$=new l;$.subscribe(f);A.subscribe(f);new I;
